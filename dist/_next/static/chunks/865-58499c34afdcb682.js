"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{3503:(e,a,r)=>{r.d(a,{A:()=>l});let l=(0,r(3508).A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},7584:(e,a,r)=>{r.d(a,{A:()=>l});let l=(0,r(3508).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9865:(e,a,r)=>{r.d(a,{A:()=>m});var l=r(1503),t=r(2223),o=r(2431),s=r(5293),i=r(3679),n=r(4577),d=r(1298),c=r(3503),h=r(7584);let p={async buscarCEP(e){try{let a=e.replace(/\D/g,"");if(8!==a.length)throw Error("CEP deve ter 8 d\xedgitos");let r=await fetch("https://viacep.com.br/ws/".concat(a,"/json/"));if(!r.ok)throw Error("Erro ao buscar CEP");let l=await r.json();if(l.erro)throw Error("CEP n\xe3o encontrado");return l}catch(e){return null}}},u={async buscarCNPJ(e){try{let a=e.replace(/\D/g,"");if(14!==a.length)throw Error("CNPJ deve ter 14 d\xedgitos");let r=await fetch("https://brasilapi.com.br/api/cnpj/v1/".concat(a));if(!r.ok)throw Error("Erro ao buscar CNPJ");let l=await r.json();if(l.message)throw Error(l.message);return l}catch(e){return null}}};function m(e){let{cliente:a,onSubmit:r,onCancel:m,loading:v=!1}=e,[x,j]=(0,t.useState)({nome:(null==a?void 0:a.nome)||"",email:(null==a?void 0:a.email)||"",telefone:(null==a?void 0:a.telefone)||"",endereco:(null==a?void 0:a.endereco)||"",cidade:(null==a?void 0:a.cidade)||"",estado:(null==a?void 0:a.estado)||"",cep:(null==a?void 0:a.cep)||"",documento:(null==a?void 0:a.documento)||"",observacoes:(null==a?void 0:a.observacoes)||"",tipo:(null==a?void 0:a.tipo)||"cliente"}),[g,f]=(0,t.useState)(!1),[y,C]=(0,t.useState)(!1),b=async e=>{if(j(a=>({...a,cep:e})),8===e.replace(/\D/g,"").length){f(!0);try{let a=await p.buscarCEP(e);a&&j(e=>({...e,endereco:a.logradouro,bairro:a.bairro,cidade:a.localidade,estado:a.uf}))}catch(e){}finally{f(!1)}}},N=async e=>{if(j(a=>({...a,documento:e})),14===e.replace(/\D/g,"").length){C(!0);try{let a=await u.buscarCNPJ(e);a&&j(e=>({...e,nome:a.razao_social,endereco:"".concat(a.logradouro,", ").concat(a.numero),cidade:a.municipio,estado:a.uf,cep:a.cep,tipo:"cliente"}))}catch(e){}finally{C(!1)}}};return(0,l.jsxs)(n.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,l.jsx)(n.aR,{children:(0,l.jsx)(n.ZB,{children:a?"Editar Cliente":"Novo Cliente"})}),(0,l.jsx)(n.Wu,{children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(x)},className:"space-y-4",children:[(0,l.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"tipo",children:"Tipo"}),(0,l.jsxs)("select",{id:"tipo",value:x.tipo,onChange:e=>j(a=>({...a,tipo:e.target.value})),className:"w-full p-2 border rounded-md",children:[(0,l.jsx)("option",{value:"cliente",children:"Cliente"}),(0,l.jsx)("option",{value:"fornecedor",children:"Fornecedor"}),(0,l.jsx)("option",{value:"ambos",children:"Cliente e Fornecedor"})]})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"documento",children:"CNPJ/CPF"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(s.p,{id:"documento",type:"text",value:x.documento,onChange:e=>N(e.target.value),placeholder:"Digite o CNPJ ou CPF",className:"pr-10"}),y&&(0,l.jsx)(d.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 animate-spin"}),(0,l.jsx)(c.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"nome",children:"Nome/Raz\xe3o Social"}),(0,l.jsx)(s.p,{id:"nome",type:"text",value:x.nome,onChange:e=>j(a=>({...a,nome:e.target.value})),placeholder:"Nome completo ou raz\xe3o social",required:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"email",children:"Email"}),(0,l.jsx)(s.p,{id:"email",type:"email",value:x.email,onChange:e=>j(a=>({...a,email:e.target.value})),placeholder:"email@exemplo.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"telefone",children:"Telefone"}),(0,l.jsx)(s.p,{id:"telefone",type:"tel",value:x.telefone,onChange:e=>j(a=>({...a,telefone:e.target.value})),placeholder:"(11) 99999-9999"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"cep",children:"CEP"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(s.p,{id:"cep",type:"text",value:x.cep,onChange:e=>b(e.target.value),placeholder:"00000-000",className:"pr-10"}),g&&(0,l.jsx)(d.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 animate-spin"}),(0,l.jsx)(h.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"endereco",children:"Endere\xe7o"}),(0,l.jsx)(s.p,{id:"endereco",type:"text",value:x.endereco,onChange:e=>j(a=>({...a,endereco:e.target.value})),placeholder:"Rua, n\xfamero, complemento"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"cidade",children:"Cidade"}),(0,l.jsx)(s.p,{id:"cidade",type:"text",value:x.cidade,onChange:e=>j(a=>({...a,cidade:e.target.value})),placeholder:"Cidade"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"estado",children:"Estado"}),(0,l.jsx)(s.p,{id:"estado",type:"text",value:x.estado,onChange:e=>j(a=>({...a,estado:e.target.value})),placeholder:"UF",maxLength:2})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.J,{htmlFor:"observacoes",children:"Observa\xe7\xf5es"}),(0,l.jsx)("textarea",{id:"observacoes",value:x.observacoes,onChange:e=>j(a=>({...a,observacoes:e.target.value})),placeholder:"Observa\xe7\xf5es adicionais",className:"w-full p-2 border rounded-md h-20 resize-none"})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,l.jsx)(o.$,{type:"button",variant:"outline",onClick:m,children:"Cancelar"}),(0,l.jsx)(o.$,{type:"submit",disabled:v,children:v?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar"})]})]})})]})}}}]);