(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{3572:(e,a,t)=>{"use strict";t.d(a,{Aw:()=>o,By:()=>h,Pp:()=>r,Rg:()=>i,Sm:()=>u,Xg:()=>d,pK:()=>n,tq:()=>p,y1:()=>l,yl:()=>c});let s=t(446).A.create({baseURL:"https://gestao.meguispet.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{try{if(window.localStorage){let a=localStorage.getItem("token");a&&(e.headers.Authorization="Bearer ".concat(a))}}catch(e){}return e});let c={getMetrics:async()=>(await s.get("/dashboard/metrics.php")).data,getRecentSales:async()=>(await s.get("/dashboard/recent-sales.php")).data,getTopProducts:async()=>(await s.get("/dashboard/top-products.php")).data,getVendas7Dias:async()=>(await s.get("/dashboard/vendas-7-dias.php")).data},n={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/clientes.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/clientes.php?id=".concat(e))).data,create:async e=>(await s.post("/clientes.php",e)).data,update:async(e,a)=>(await s.put("/clientes.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/clientes.php?id=".concat(e))).data},o={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/produtos.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/produtos.php/".concat(e))).data,create:async e=>(await s.post("/produtos.php",e)).data,update:async(e,a)=>(await s.put("/produtos.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/produtos.php?id=".concat(e))).data,updateStock:async(e,a)=>(await s.patch("/produtos.php?id=".concat(e),{estoque:a})).data,async getEstoqueRelatorio(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,t=arguments.length>2?arguments[2]:void 0,c="/estoque-relatorio.php?page=".concat(e,"&limit=").concat(a);return t&&Object.keys(t).forEach(e=>{t[e]&&(c+="&".concat(e,"=").concat(t[e]))}),(await s.get(c)).data}},r={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/vendas.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/vendas.php?id=".concat(e))).data,create:async e=>(await s.post("/vendas.php",e)).data,update:async(e,a)=>(await s.put("/vendas.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/vendas.php?id=".concat(e))).data},i={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/vendedores.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/vendedores.php?id=".concat(e))).data,create:async e=>(await s.post("/vendedores.php",e)).data,update:async(e,a)=>(await s.put("/vendedores.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/vendedores.php?id=".concat(e))).data},d={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/usuarios.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/usuarios.php?id=".concat(e))).data,create:async e=>(await s.post("/usuarios.php",e)).data,update:async(e,a)=>(await s.put("/usuarios.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/usuarios.php?id=".concat(e))).data},l={login:async(e,a)=>(await s.post("/auth.php",{email:e,password:a})).data,async logout(){try{window.localStorage&&localStorage.removeItem("token")}catch(e){}},getProfile:async()=>(await s.get("/auth/profile.php")).data},p={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/fornecedores.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/fornecedores.php/".concat(e))).data,create:async e=>(await s.post("/fornecedores.php",e)).data,update:async(e,a)=>(await s.put("/fornecedores.php/".concat(e),a)).data,delete:async e=>(await s.delete("/fornecedores.php/".concat(e))).data},u={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,n="/movimentacoes.php?page=".concat(e,"&limit=").concat(a);return t&&(n+="&tipo=".concat(t)),c&&(n+="&status=".concat(c)),(await s.get(n)).data},getById:async e=>(await s.get("/movimentacoes.php/".concat(e))).data,create:async e=>(await s.post("/movimentacoes.php",e)).data,updateStatus:async(e,a)=>(await s.put("/movimentacoes.php/".concat(e,"/status"),{id:e,status:a})).data},h={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o="/transacoes.php?page=".concat(e,"&limit=").concat(a);return t&&(o+="&tipo=".concat(t)),c&&(o+="&data_inicio=".concat(c)),n&&(o+="&data_fim=".concat(n)),(await s.get(o)).data},getById:async e=>(await s.get("/transacoes.php/".concat(e))).data,create:async e=>(await s.post("/transacoes.php",e)).data,update:async(e,a)=>(await s.put("/transacoes.php/".concat(e),a)).data,delete:async e=>(await s.delete("/transacoes.php/".concat(e))).data,getMetricas:async()=>(await s.get("/transacoes.php?metricas=1")).data}},3726:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var s=t(1503),c=t(2223),n=t(4423),o=t(4577),r=t(2431),i=t(5293),d=t(5785),l=t(3032),p=t(7472),u=t(3600),h=t(3572);function m(){let e=(0,n.useRouter)(),[a,t]=(0,c.useState)(""),[m,g]=(0,c.useState)([]),[y,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let{q:a}=e.query;a&&"string"==typeof a&&(t(a),w(a))},[e.query]);let w=async e=>{if(e.trim())try{x(!0);let a=[];try{let t=await h.Pp.getAll(1,50);t.success&&t.data&&t.data.filter(a=>{var t,s,c,n,o;return(null==(s=a.cliente)||null==(t=s.nome)?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==(n=a.vendedor)||null==(c=n.nome)?void 0:c.toLowerCase().includes(e.toLowerCase()))||(null==(o=a.numero_venda)?void 0:o.toLowerCase().includes(e.toLowerCase()))}).forEach(e=>{var t;a.push({type:"venda",id:e.id,title:"Venda #".concat(e.numero_venda),description:"Cliente: ".concat((null==(t=e.cliente)?void 0:t.nome)||"N/A"," | Total: R$ ").concat(e.valor_final),icon:d.A,data:e})})}catch(e){}try{let t=await h.pK.getAll(1,50);t.success&&t.data&&t.data.filter(a=>{var t,s,c;return(null==(t=a.nome)?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==(s=a.email)?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null==(c=a.telefone)?void 0:c.includes(e))}).forEach(e=>{a.push({type:"cliente",id:e.id,title:e.nome,description:"".concat(e.email||"Sem email"," | ").concat(e.telefone||"Sem telefone"),icon:l.A,data:e})})}catch(e){}try{let t=await h.Aw.getAll(1,50);t.success&&t.data&&t.data.filter(a=>{var t,s;return(null==(t=a.nome)?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==(s=a.categoria)?void 0:s.toLowerCase().includes(e.toLowerCase()))}).forEach(e=>{a.push({type:"produto",id:e.id,title:e.nome,description:"".concat(e.categoria||"Sem categoria"," | Estoque: ").concat(e.estoque," | R$ ").concat(e.preco_venda),icon:p.A,data:e})})}catch(e){}g(a)}catch(e){}finally{x(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Busca"}),(0,s.jsxs)("p",{className:"text-gray-600",children:['Resultados para: "',a,'"']})]})}),(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"pt-6",children:(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),a.trim()&&e.push("/busca?q=".concat(encodeURIComponent(a)))},className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,s.jsx)(i.p,{placeholder:"Buscar vendas, clientes, produtos...",value:a,onChange:e=>t(e.target.value),className:"pl-10"})]}),(0,s.jsxs)(r.$,{type:"submit",children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Buscar"]})]})})}),y?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-meguispet-primary"})}):m.length>0?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[m.length," resultado(s) encontrado(s)"]}),(0,s.jsx)("div",{className:"grid gap-4",children:m.map((a,t)=>{let c=a.icon;return(0,s.jsx)(o.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>(a=>{switch(a.type){case"venda":e.push("/vendas");break;case"cliente":e.push("/clientes");break;case"produto":e.push("/produtos")}})(a),children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)(c,{className:"h-6 w-6 text-meguispet-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:a.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),(0,s.jsx)("div",{className:"flex items-center space-x-4 mt-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-meguispet-primary/10 text-meguispet-primary",children:"venda"===a.type?"Venda":"cliente"===a.type?"Cliente":"Produto"})})]})]})})},"".concat(a.type,"-").concat(a.id,"-").concat(t))})})]}):a?(0,s.jsx)(o.Zp,{children:(0,s.jsxs)(o.Wu,{className:"flex flex-col items-center justify-center py-8",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum resultado encontrado"}),(0,s.jsx)("p",{className:"text-gray-600 text-center",children:"Tente usar termos diferentes ou verifique a ortografia"})]})}):(0,s.jsx)(o.Zp,{children:(0,s.jsxs)(o.Wu,{className:"flex flex-col items-center justify-center py-8",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Digite algo para buscar"}),(0,s.jsx)("p",{className:"text-gray-600 text-center",children:"Use a barra de busca acima para encontrar vendas, clientes ou produtos"})]})})]})}},4577:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>l,ZB:()=>i,Zp:()=>o,aR:()=>r});var s=t(1503),c=t(2223),n=t(4001);let o=c.forwardRef((e,a)=>{let{className:t,...c}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-xs",t),...c})});o.displayName="Card";let r=c.forwardRef((e,a)=>{let{className:t,...c}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...c})});r.displayName="CardHeader";let i=c.forwardRef((e,a)=>{let{className:t,...c}=e;return(0,s.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...c})});i.displayName="CardTitle";let d=c.forwardRef((e,a)=>{let{className:t,...c}=e;return(0,s.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...c})});d.displayName="CardDescription";let l=c.forwardRef((e,a)=>{let{className:t,...c}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...c})});l.displayName="CardContent",c.forwardRef((e,a)=>{let{className:t,...c}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...c})}).displayName="CardFooter"},4744:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/busca",function(){return t(3726)}])}},e=>{e.O(0,[446,636,593,792],()=>e(e.s=4744)),_N_E=e.O()}]);