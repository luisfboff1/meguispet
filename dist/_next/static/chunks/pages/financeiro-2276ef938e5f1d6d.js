(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{712:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2552:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/financeiro",function(){return t(3607)}])},3572:(e,a,t)=>{"use strict";t.d(a,{Aw:()=>c,By:()=>h,Pp:()=>i,Rg:()=>d,Sm:()=>p,Xg:()=>n,pK:()=>l,tq:()=>x,y1:()=>o,yl:()=>r});let s=t(446).A.create({baseURL:"https://gestao.meguispet.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{try{if(window.localStorage){let a=localStorage.getItem("token");a&&(e.headers.Authorization="Bearer ".concat(a))}}catch(e){}return e});let r={getMetrics:async()=>(await s.get("/dashboard/metrics.php")).data,getRecentSales:async()=>(await s.get("/dashboard/recent-sales.php")).data,getTopProducts:async()=>(await s.get("/dashboard/top-products.php")).data,getVendas7Dias:async()=>(await s.get("/dashboard/vendas-7-dias.php")).data},l={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/clientes.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/clientes.php?id=".concat(e))).data,create:async e=>(await s.post("/clientes.php",e)).data,update:async(e,a)=>(await s.put("/clientes.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/clientes.php?id=".concat(e))).data},c={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/produtos.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/produtos.php/".concat(e))).data,create:async e=>(await s.post("/produtos.php",e)).data,update:async(e,a)=>(await s.put("/produtos.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/produtos.php?id=".concat(e))).data,updateStock:async(e,a)=>(await s.patch("/produtos.php?id=".concat(e),{estoque:a})).data,async getEstoqueRelatorio(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,t=arguments.length>2?arguments[2]:void 0,r="/estoque-relatorio.php?page=".concat(e,"&limit=").concat(a);return t&&Object.keys(t).forEach(e=>{t[e]&&(r+="&".concat(e,"=").concat(t[e]))}),(await s.get(r)).data}},i={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/vendas.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/vendas.php?id=".concat(e))).data,create:async e=>(await s.post("/vendas.php",e)).data,update:async(e,a)=>(await s.put("/vendas.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/vendas.php?id=".concat(e))).data},d={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/vendedores.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/vendedores.php?id=".concat(e))).data,create:async e=>(await s.post("/vendedores.php",e)).data,update:async(e,a)=>(await s.put("/vendedores.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/vendedores.php?id=".concat(e))).data},n={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/usuarios.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/usuarios.php?id=".concat(e))).data,create:async e=>(await s.post("/usuarios.php",e)).data,update:async(e,a)=>(await s.put("/usuarios.php?id=".concat(e),a)).data,delete:async e=>(await s.delete("/usuarios.php?id=".concat(e))).data},o={login:async(e,a)=>(await s.post("/auth.php",{email:e,password:a})).data,async logout(){try{window.localStorage&&localStorage.removeItem("token")}catch(e){}},getProfile:async()=>(await s.get("/auth/profile.php")).data},x={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/fornecedores.php?page=".concat(e,"&limit=").concat(a))).data},getById:async e=>(await s.get("/fornecedores.php/".concat(e))).data,create:async e=>(await s.post("/fornecedores.php",e)).data,update:async(e,a)=>(await s.put("/fornecedores.php/".concat(e),a)).data,delete:async e=>(await s.delete("/fornecedores.php/".concat(e))).data},p={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l="/movimentacoes.php?page=".concat(e,"&limit=").concat(a);return t&&(l+="&tipo=".concat(t)),r&&(l+="&status=".concat(r)),(await s.get(l)).data},getById:async e=>(await s.get("/movimentacoes.php/".concat(e))).data,create:async e=>(await s.post("/movimentacoes.php",e)).data,updateStatus:async(e,a)=>(await s.put("/movimentacoes.php/".concat(e,"/status"),{id:e,status:a})).data},h={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,c="/transacoes.php?page=".concat(e,"&limit=").concat(a);return t&&(c+="&tipo=".concat(t)),r&&(c+="&data_inicio=".concat(r)),l&&(c+="&data_fim=".concat(l)),(await s.get(c)).data},getById:async e=>(await s.get("/transacoes.php/".concat(e))).data,create:async e=>(await s.post("/transacoes.php",e)).data,update:async(e,a)=>(await s.put("/transacoes.php/".concat(e),a)).data,delete:async e=>(await s.delete("/transacoes.php/".concat(e))).data,getMetricas:async()=>(await s.get("/transacoes.php?metricas=1")).data}},3607:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>B});var s=t(1503),r=t(2223),l=t(4577),c=t(2431),i=t(5293),d=t(4684),n=t(712),o=t(6693),x=t(6496),p=t(7288),h=t(8327),m=t(3600),u=t(6949),g=t(5949),v=t(3508);let j=(0,v.A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var y=t(6578),f=t(3572),N=t(3679),w=t(9226);let b=(0,v.A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),k=(0,v.A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),A=[{value:"Vendas",label:"Vendas"},{value:"Compras",label:"Compras"},{value:"Utilidades",label:"Utilidades"},{value:"Aluguel",label:"Aluguel"},{value:"Folha",label:"Folha de Pagamento"},{value:"Marketing",label:"Marketing"},{value:"Manuten\xe7\xe3o",label:"Manuten\xe7\xe3o"},{value:"Transporte",label:"Transporte"},{value:"Outros",label:"Outros"}];function R(e){let{initialData:a,onSubmit:t,onCancel:d,loading:n=!1,title:o="Nova Transa\xe7\xe3o"}=e,[x,h]=(0,r.useState)({tipo:(null==a?void 0:a.tipo)||"receita",valor:(null==a?void 0:a.valor)||0,descricao:(null==a?void 0:a.descricao)||"",categoria:(null==a?void 0:a.categoria)||"",data_transacao:(null==a?void 0:a.data_transacao)||new Date().toISOString().split("T")[0],observacoes:(null==a?void 0:a.observacoes)||""}),[m,u]=(0,r.useState)({}),g=(e,a)=>{h(t=>({...t,[e]:a})),m[e]&&u(a=>({...a,[e]:""}))},v=async e=>{e.preventDefault(),(()=>{let e={};return x.descricao.trim()||(e.descricao="Descri\xe7\xe3o \xe9 obrigat\xf3ria"),x.valor<=0&&(e.valor="Valor deve ser maior que zero"),x.categoria||(e.categoria="Categoria \xe9 obrigat\xf3ria"),x.data_transacao||(e.data_transacao="Data \xe9 obrigat\xf3ria"),u(e),0===Object.keys(e).length})()&&await t(x)};return(0,s.jsxs)(l.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,s.jsx)(p.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:o})]}),(0,s.jsx)(l.BT,{children:"Preencha os dados da transa\xe7\xe3o financeira"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{children:"Tipo da Transa\xe7\xe3o"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(c.$,{type:"button",variant:"receita"===x.tipo?"default":"outline",onClick:()=>g("tipo","receita"),className:"flex-1",children:"Receita"}),(0,s.jsx)(c.$,{type:"button",variant:"despesa"===x.tipo?"default":"outline",onClick:()=>g("tipo","despesa"),className:"flex-1",children:"Despesa"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{htmlFor:"valor",children:"Valor *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.p,{id:"valor",type:"number",step:"0.01",min:"0",placeholder:"0,00",value:x.valor||"",onChange:e=>g("valor",parseFloat(e.target.value)||0),className:"pl-10",required:!0})]}),m.valor&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:m.valor})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{htmlFor:"descricao",children:"Descri\xe7\xe3o *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(w.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.p,{id:"descricao",placeholder:"Ex: Venda de ra\xe7\xe3o premium",value:x.descricao,onChange:e=>g("descricao",e.target.value),className:"pl-10",required:!0})]}),m.descricao&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:m.descricao})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{htmlFor:"categoria",children:"Categoria *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(b,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsxs)("select",{id:"categoria",value:x.categoria,onChange:e=>g("categoria",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Selecione uma categoria"}),A.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),m.categoria&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:m.categoria})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{htmlFor:"data_transacao",children:"Data *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.p,{id:"data_transacao",type:"date",value:x.data_transacao,onChange:e=>g("data_transacao",e.target.value),className:"pl-10",required:!0})]}),m.data_transacao&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:m.data_transacao})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{htmlFor:"observacoes",children:"Observa\xe7\xf5es"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(k,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)("textarea",{id:"observacoes",placeholder:"Informa\xe7\xf5es adicionais (opcional)",value:x.observacoes,onChange:e=>g("observacoes",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:3})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,s.jsx)(c.$,{type:"submit",disabled:n,className:"flex-1 bg-meguispet-primary hover:bg-meguispet-primary/90",children:n?"Salvando...":"Salvar Transa\xe7\xe3o"}),(0,s.jsx)(c.$,{type:"button",variant:"outline",onClick:d,disabled:n,className:"flex-1",children:"Cancelar"})]})]})})]})}function S(e){let{data:a,title:t,description:r}=e,c=Math.max(...a.flatMap(e=>[parseFloat(e.receitas.toString())||0,parseFloat(e.despesas.toString())||0]),100),i=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:t}),(0,s.jsx)(l.BT,{children:r})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receitas"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Despesas"})]})]}),(0,s.jsx)("div",{className:"h-64 flex items-end justify-between space-x-2 p-4",children:a.map((e,a)=>(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center space-y-2",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col items-center space-y-1 h-48",children:[(0,s.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,s.jsx)("div",{className:"w-full bg-green-500 rounded-t transition-all duration-300 hover:bg-green-600 cursor-pointer",style:{height:"".concat((parseFloat(e.receitas.toString())||0)/c*180,"px"),minHeight:(parseFloat(e.receitas.toString())||0)>0?"4px":"0px"},title:"Receitas: ".concat(i(parseFloat(e.receitas.toString())||0))})}),(0,s.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,s.jsx)("div",{className:"w-full bg-red-500 rounded-b transition-all duration-300 hover:bg-red-600 cursor-pointer",style:{height:"".concat((parseFloat(e.despesas.toString())||0)/c*180,"px"),minHeight:(parseFloat(e.despesas.toString())||0)>0?"4px":"0px"},title:"Despesas: ".concat(i(parseFloat(e.despesas.toString())||0))})})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:(e=>{let[a,t]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(t)-1]," ").concat(a.slice(-2))})(e.mes)}),(0,s.jsxs)("div",{className:"text-xs text-center space-y-1",children:[(0,s.jsx)("div",{className:"text-green-600 font-medium",children:i(parseFloat(e.receitas.toString())||0)}),(0,s.jsx)("div",{className:"text-red-600 font-medium",children:i(parseFloat(e.despesas.toString())||0)})]})]},a))}),(0,s.jsx)("div",{className:"border-t pt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i(a.reduce((e,a)=>e+(parseFloat(a.receitas.toString())||0),0))}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Total Receitas"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:i(a.reduce((e,a)=>e+(parseFloat(a.despesas.toString())||0),0))}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Total Despesas"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(a.reduce((e,a)=>e+(parseFloat(a.receitas.toString())||0)-(parseFloat(a.despesas.toString())||0),0)>=0?"text-green-600":"text-red-600"),children:i(a.reduce((e,a)=>e+(parseFloat(a.receitas.toString())||0)-(parseFloat(a.despesas.toString())||0),0))}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Saldo"})]})]})})]})})]})}function C(e){let{data:a,title:t,description:r}=e,c=parseFloat(a.receita.toString())||0,i=parseFloat(a.despesas.toString())||0,d=c+i,n=d>0?c/d*100:0,o=d>0?i/d*100:0,x=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:t}),(0,s.jsx)(l.BT,{children:r})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"relative w-48 h-48",children:[(0,s.jsxs)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[(0,s.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10b981",strokeWidth:"20",strokeDasharray:"".concat(2.51*n," ").concat(100*2.51),className:"transition-all duration-300"}),(0,s.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#ef4444",strokeWidth:"20",strokeDasharray:"".concat(2.51*o," ").concat(100*2.51),strokeDashoffset:"-".concat(2.51*n),className:"transition-all duration-300"})]}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:x(d)}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Total"})]})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Receitas"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"font-medium",children:x(c)}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[n.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Despesas"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"font-medium",children:x(i)}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[o.toFixed(1),"%"]})]})]})]})]})})]})}function B(){let[e,a]=(0,r.useState)(!1),[t,v]=(0,r.useState)(null),[N,w]=(0,r.useState)([]),[b,k]=(0,r.useState)(null),[A,B]=(0,r.useState)(!1),[M,F]=(0,r.useState)(null),[D,T]=(0,r.useState)(""),[_,Z]=(0,r.useState)("");(0,r.useEffect)(()=>{E()},[]);let E=async()=>{try{a(!0),k(null);let[e,t]=await Promise.all([f.By.getMetricas(),f.By.getAll(1,50)]);e.success&&e.data&&v(e.data),t.success&&t.data&&w(t.data)}catch(e){k("Erro ao carregar dados financeiros")}finally{a(!1)}},q=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),z=async e=>{try{a(!0);let t=await f.By.create(e);t.success?(B(!1),F(null),await E()):k(t.message||"Erro ao criar transa\xe7\xe3o")}catch(e){k("Erro ao criar transa\xe7\xe3o")}finally{a(!1)}},I=async e=>{if(M)try{a(!0);let t=await f.By.update(M.id,e);t.success?(B(!1),F(null),await E()):k(t.message||"Erro ao atualizar transa\xe7\xe3o")}catch(e){k("Erro ao atualizar transa\xe7\xe3o")}finally{a(!1)}},$=async e=>{if(confirm("Tem certeza que deseja excluir esta transa\xe7\xe3o?"))try{a(!0);let t=await f.By.delete(e);t.success?await E():k(t.message||"Erro ao excluir transa\xe7\xe3o")}catch(e){k("Erro ao excluir transa\xe7\xe3o")}finally{a(!1)}},L=N.filter(e=>{let a=e.descricao.toLowerCase().includes(D.toLowerCase())||e.categoria.toLowerCase().includes(D.toLowerCase()),t=!_||e.tipo===_;return a&&t});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Financeiro"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Controle financeiro e relat\xf3rios"}),b&&(0,s.jsx)("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400",children:b})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsxs)(c.$,{className:"bg-meguispet-primary hover:bg-meguispet-primary/90",onClick:()=>{F(null),B(!0)},children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Nova Transa\xe7\xe3o"]}),(0,s.jsxs)(c.$,{variant:"outline",onClick:()=>alert("Relat\xf3rio em desenvolvimento"),children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Relat\xf3rio"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.ZB,{className:"text-sm font-medium",children:"Receita Total"}),(0,s.jsx)(o.A,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e?"Carregando...":t?q(t.receita):"R$ 0,00"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Este m\xeas"})]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.ZB,{className:"text-sm font-medium",children:"Despesas"}),(0,s.jsx)(x.A,{className:"h-4 w-4 text-red-600"})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e?"Carregando...":t?q(t.despesas):"R$ 0,00"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Este m\xeas"})]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.ZB,{className:"text-sm font-medium",children:"Lucro L\xedquido"}),(0,s.jsx)(p.A,{className:"h-4 w-4 text-meguispet-primary"})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e?"Carregando...":t?q(t.lucro):"R$ 0,00"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Este m\xeas"})]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.ZB,{className:"text-sm font-medium",children:"Margem"}),(0,s.jsx)(h.A,{className:"h-4 w-4 text-meguispet-primary"})]}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e?"Carregando...":t?"".concat(t.margem,"%"):"0%"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Margem de lucro"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(null==t?void 0:t.grafico_mensal)?(0,s.jsx)(S,{data:t.grafico_mensal,title:"Receitas vs Despesas",description:"\xdaltimos 6 meses"}):(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Receitas vs Despesas"}),(0,s.jsx)(l.BT,{children:"\xdaltimos 6 meses"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(h.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Carregando dados..."})]})})})]}),t?(0,s.jsx)(C,{data:{receita:t.receita||0,despesas:t.despesas||0},title:"Distribui\xe7\xe3o Financeira",description:"Receitas vs Despesas do m\xeas"}):(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Distribui\xe7\xe3o Financeira"}),(0,s.jsx)(l.BT,{children:"Receitas vs Despesas do m\xeas"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(o.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Carregando dados..."})]})})})]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ZB,{children:"Transa\xe7\xf5es Recentes"}),(0,s.jsx)(l.BT,{children:"\xdaltimas movimenta\xe7\xf5es financeiras"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.p,{placeholder:"Buscar transa\xe7\xf5es...",value:D,onChange:e=>T(e.target.value),className:"pl-10 w-64"})]}),(0,s.jsxs)("select",{value:_,onChange:e=>Z(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"",children:"Todos os tipos"}),(0,s.jsx)("option",{value:"receita",children:"Receitas"}),(0,s.jsx)("option",{value:"despesa",children:"Despesas"})]})]})]})}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)("div",{className:"space-y-4",children:e?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Carregando transa\xe7\xf5es..."})]}):L.length>0?(0,s.jsx)("div",{className:"space-y-3",children:L.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("receita"===e.tipo?"bg-green-500":"bg-red-500")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.descricao}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.categoria," â€¢ ",new Date(e.data_transacao).toLocaleDateString("pt-BR")]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("span",{className:"font-bold ".concat("receita"===e.tipo?"text-green-600":"text-red-600"),children:["receita"===e.tipo?"+":"-",q(e.valor)]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{F(e),B(!0)},title:"Editar",children:(0,s.jsx)(u.A,{className:"h-4 w-4"})}),(0,s.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>$(e.id),title:"Excluir",className:"text-red-600 hover:text-red-700",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})]})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Nenhuma transa\xe7\xe3o encontrada"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:D||_?"Nenhuma transa\xe7\xe3o corresponde aos filtros aplicados":"As transa\xe7\xf5es financeiras aparecer\xe3o aqui quando forem registradas"})]})})})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"A\xe7\xf5es R\xe1pidas"}),(0,s.jsx)(l.BT,{children:"Opera\xe7\xf5es financeiras comuns"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)(c.$,{variant:"outline",className:"h-20 flex flex-col",onClick:()=>{F(null),B(!0)},children:[(0,s.jsx)(p.A,{className:"h-6 w-6 mb-2"}),(0,s.jsx)("span",{children:"Nova Receita"})]}),(0,s.jsxs)(c.$,{variant:"outline",className:"h-20 flex flex-col",onClick:()=>{F(null),B(!0)},children:[(0,s.jsx)(x.A,{className:"h-6 w-6 mb-2"}),(0,s.jsx)("span",{children:"Nova Despesa"})]}),(0,s.jsxs)(c.$,{variant:"outline",className:"h-20 flex flex-col",onClick:()=>alert("Relat\xf3rio Mensal - Em desenvolvimento"),children:[(0,s.jsx)(y.A,{className:"h-6 w-6 mb-2"}),(0,s.jsx)("span",{children:"Relat\xf3rio Mensal"})]})]})})]}),A&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsx)(R,{initialData:M?{tipo:M.tipo,valor:M.valor,descricao:M.descricao,categoria:M.categoria,data_transacao:M.data_transacao,observacoes:M.observacoes||""}:void 0,onSubmit:M?I:z,onCancel:()=>{B(!1),F(null)},loading:e,title:M?"Editar Transa\xe7\xe3o":"Nova Transa\xe7\xe3o"})})})]})}},3679:(e,a,t)=>{"use strict";t.d(a,{J:()=>n});var s=t(1503),r=t(2223),l=t(5363),c=t(6783),i=t(4001);let d=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.b,{ref:a,className:(0,i.cn)(d(),t),...r})});n.displayName=l.b.displayName},3802:(e,a,t)=>{"use strict";t.d(a,{sG:()=>c});var s=t(2223);t(9507);var r=t(228),l=t(1503),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let t=(0,r.TL)(`Primitive.${a}`),c=s.forwardRef((e,s)=>{let{asChild:r,...c}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(r?t:a,{...c,ref:s})});return c.displayName=`Primitive.${a}`,{...e,[a]:c}},{})},4577:(e,a,t)=>{"use strict";t.d(a,{BT:()=>n,Wu:()=>o,ZB:()=>d,Zp:()=>c,aR:()=>i});var s=t(1503),r=t(2223),l=t(4001);let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-xs",t),...r})});c.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});n.displayName="CardDescription";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},4684:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5363:(e,a,t)=>{"use strict";t.d(a,{b:()=>i});var s=t(2223),r=t(3802),l=t(1503),c=s.forwardRef((e,a)=>(0,l.jsx)(r.sG.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));c.displayName="Label";var i=c},5949:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},6496:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},6578:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6693:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6949:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8327:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},9226:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(3508).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[446,636,593,792],()=>e(e.s=2552)),_N_E=e.O()}]);