(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{712:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3508).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},3572:(e,t,a)=>{"use strict";a.d(t,{Aw:()=>d,By:()=>m,Pp:()=>l,Rg:()=>r,Sm:()=>h,Xg:()=>i,pK:()=>n,tq:()=>p,y1:()=>o,yl:()=>c});let s=a(446).A.create({baseURL:"https://gestao.meguispet.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{try{if(window.localStorage){let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}}catch(e){}return e});let c={getMetrics:async()=>(await s.get("/dashboard/metrics.php")).data,getRecentSales:async()=>(await s.get("/dashboard/recent-sales.php")).data,getTopProducts:async()=>(await s.get("/dashboard/top-products.php")).data,getVendas7Dias:async()=>(await s.get("/dashboard/vendas-7-dias.php")).data},n={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/clientes.php?page=".concat(e,"&limit=").concat(t))).data},getById:async e=>(await s.get("/clientes.php?id=".concat(e))).data,create:async e=>(await s.post("/clientes.php",e)).data,update:async(e,t)=>(await s.put("/clientes.php?id=".concat(e),t)).data,delete:async e=>(await s.delete("/clientes.php?id=".concat(e))).data},d={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/produtos.php?page=".concat(e,"&limit=").concat(t))).data},getById:async e=>(await s.get("/produtos.php/".concat(e))).data,create:async e=>(await s.post("/produtos.php",e)).data,update:async(e,t)=>(await s.put("/produtos.php?id=".concat(e),t)).data,delete:async e=>(await s.delete("/produtos.php?id=".concat(e))).data,updateStock:async(e,t)=>(await s.patch("/produtos.php?id=".concat(e),{estoque:t})).data,async getEstoqueRelatorio(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2?arguments[2]:void 0,c="/estoque-relatorio.php?page=".concat(e,"&limit=").concat(t);return a&&Object.keys(a).forEach(e=>{a[e]&&(c+="&".concat(e,"=").concat(a[e]))}),(await s.get(c)).data}},l={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/vendas.php?page=".concat(e,"&limit=").concat(t))).data},getById:async e=>(await s.get("/vendas.php?id=".concat(e))).data,create:async e=>(await s.post("/vendas.php",e)).data,update:async(e,t)=>(await s.put("/vendas.php?id=".concat(e),t)).data,delete:async e=>(await s.delete("/vendas.php?id=".concat(e))).data},r={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/vendedores.php?page=".concat(e,"&limit=").concat(t))).data},getById:async e=>(await s.get("/vendedores.php?id=".concat(e))).data,create:async e=>(await s.post("/vendedores.php",e)).data,update:async(e,t)=>(await s.put("/vendedores.php?id=".concat(e),t)).data,delete:async e=>(await s.delete("/vendedores.php?id=".concat(e))).data},i={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/usuarios.php?page=".concat(e,"&limit=").concat(t))).data},getById:async e=>(await s.get("/usuarios.php?id=".concat(e))).data,create:async e=>(await s.post("/usuarios.php",e)).data,update:async(e,t)=>(await s.put("/usuarios.php?id=".concat(e),t)).data,delete:async e=>(await s.delete("/usuarios.php?id=".concat(e))).data},o={login:async(e,t)=>(await s.post("/auth.php",{email:e,password:t})).data,async logout(){try{window.localStorage&&localStorage.removeItem("token")}catch(e){}},getProfile:async()=>(await s.get("/auth/profile.php")).data},p={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await s.get("/fornecedores.php?page=".concat(e,"&limit=").concat(t))).data},getById:async e=>(await s.get("/fornecedores.php/".concat(e))).data,create:async e=>(await s.post("/fornecedores.php",e)).data,update:async(e,t)=>(await s.put("/fornecedores.php/".concat(e),t)).data,delete:async e=>(await s.delete("/fornecedores.php/".concat(e))).data},h={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,n="/movimentacoes.php?page=".concat(e,"&limit=").concat(t);return a&&(n+="&tipo=".concat(a)),c&&(n+="&status=".concat(c)),(await s.get(n)).data},getById:async e=>(await s.get("/movimentacoes.php/".concat(e))).data,create:async e=>(await s.post("/movimentacoes.php",e)).data,updateStatus:async(e,t)=>(await s.put("/movimentacoes.php/".concat(e,"/status"),{id:e,status:t})).data},m={async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,d="/transacoes.php?page=".concat(e,"&limit=").concat(t);return a&&(d+="&tipo=".concat(a)),c&&(d+="&data_inicio=".concat(c)),n&&(d+="&data_fim=".concat(n)),(await s.get(d)).data},getById:async e=>(await s.get("/transacoes.php/".concat(e))).data,create:async e=>(await s.post("/transacoes.php",e)).data,update:async(e,t)=>(await s.put("/transacoes.php/".concat(e),t)).data,delete:async e=>(await s.delete("/transacoes.php/".concat(e))).data,getMetricas:async()=>(await s.get("/transacoes.php?metricas=1")).data}},3679:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var s=a(1503),c=a(2223),n=a(5363),d=a(6783),l=a(4001);let r=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(r(),a),...c})});i.displayName=n.b.displayName},3833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(1503),c=a(2223),n=a(4577),d=a(2431),l=a(5293),r=a(4684),i=a(712),o=a(5785),p=a(7288),h=a(6578),m=a(3600),x=a(9648),u=a(2073),g=a(6949),y=a(5949),f=a(3572),v=a(5582);function w(){let[e,t]=(0,c.useState)([]),[a,w]=(0,c.useState)(!0),[j,N]=(0,c.useState)(""),[b,A]=(0,c.useState)(1),[k,B]=(0,c.useState)(!1),[R,C]=(0,c.useState)(null),[S,_]=(0,c.useState)(!1);(0,c.useEffect)(()=>{D()},[b]);let D=async()=>{try{w(!0);let e=await f.Pp.getAll(b,10);e.success&&e.data&&t(e.data)}catch(e){}finally{w(!1)}},Z=e.filter(e=>{var t,a;return(null==(t=e.cliente)?void 0:t.nome.toLowerCase().includes(j.toLowerCase()))||(null==(a=e.vendedor)?void 0:a.nome.toLowerCase().includes(j.toLowerCase()))}),I=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),E=async e=>{try{_(!0),R?(await f.Pp.update(R.id,e)).success&&(await D(),B(!1),C(null)):(await f.Pp.create(e)).success&&(await D(),B(!1))}catch(e){}finally{_(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Vendas"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gerencie suas vendas e pedidos"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsxs)(d.$,{className:"bg-meguispet-primary hover:bg-meguispet-primary/90",onClick:()=>{C(null),B(!0)},children:[(0,s.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Nova Venda"]}),(0,s.jsxs)(d.$,{variant:"outline",onClick:()=>{((e,t)=>{let a=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),c=URL.createObjectURL(a);s.setAttribute("href",c),s.setAttribute("download",t),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)})([["ID","Cliente","Vendedor","Total","Status","Data","Forma Pagamento"],...e.map(e=>{var t,a;return[e.id,(null==(t=e.cliente)?void 0:t.nome)||"N/A",(null==(a=e.vendedor)?void 0:a.nome)||"N/A",e.valor_final,e.status,new Date(e.created_at).toLocaleDateString("pt-BR"),e.forma_pagamento]})].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n"),"vendas.csv")},children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Exportar"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Vendas"}),(0,s.jsx)(o.A,{className:"h-4 w-4 text-meguispet-primary"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Este m\xeas"})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Faturamento"}),(0,s.jsx)(p.A,{className:"h-4 w-4 text-meguispet-primary"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:I(e.reduce((e,t)=>e+Number(t.valor_final||0),0))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Este m\xeas"})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Ticket M\xe9dio"}),(0,s.jsx)(p.A,{className:"h-4 w-4 text-meguispet-primary"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.length>0?I(e.reduce((e,t)=>e+Number(t.valor_final||0),0)/e.length):"R$ 0,00"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Por venda"})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Vendas Hoje"}),(0,s.jsx)(h.A,{className:"h-4 w-4 text-meguispet-primary"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>new Date(e.created_at).toDateString()===new Date().toDateString()).length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Hoje"})]})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Filtros"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,s.jsx)(l.p,{placeholder:"Buscar por cliente ou vendedor...",value:j,onChange:e=>N(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)(d.$,{variant:"outline",children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Filtros"]})]})})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Lista de Vendas"}),(0,s.jsxs)(n.BT,{children:[Z.length," venda(s) encontrada(s)"]})]}),(0,s.jsx)(n.Wu,{children:a?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-meguispet-primary"})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ID"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Cliente"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Vendedor"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Total"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Data"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:Z.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"py-3 px-4 text-sm text-gray-900",children:["#",e.id]}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:(null==(t=e.cliente)?void 0:t.nome)||"N/A"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:(null==(a=e.vendedor)?void 0:a.nome)||"N/A"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:I(e.valor_final)}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"pago":return"bg-green-100 text-green-800";case"pendente":return"bg-yellow-100 text-yellow-800";case"cancelado":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(d.$,{variant:"ghost",size:"sm",children:(0,s.jsx)(u.A,{className:"h-4 w-4"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,s.jsx)(y.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})})})]}),k&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)(v.A,{venda:R||void 0,onSubmit:E,onCancel:()=>{B(!1),C(null)},loading:S})})]})}},4162:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendas",function(){return a(3833)}])},4577:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>o,ZB:()=>r,Zp:()=>d,aR:()=>l});var s=a(1503),c=a(2223),n=a(4001);let d=c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-xs",a),...c})});d.displayName="Card";let l=c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...c})});l.displayName="CardHeader";let r=c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c})});r.displayName="CardTitle";let i=c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...c})});i.displayName="CardDescription";let o=c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...c})});o.displayName="CardContent",c.forwardRef((e,t)=>{let{className:a,...c}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...c})}).displayName="CardFooter"},6578:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3508).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6949:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3508).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},9648:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3508).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])}},e=>{e.O(0,[446,296,636,593,792],()=>e(e.s=4162)),_N_E=e.O()}]);