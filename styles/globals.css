@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@custom-variant dark (&:is(.dark *));

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-sm)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

@theme {
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-meguispet-primary: #2563eb;
  --color-meguispet-secondary: #64748b;
  --color-meguispet-accent: #f59e0b;
  --color-meguispet-success: #059669;
  --color-meguispet-warning: #d97706;
  --color-meguispet-error: #dc2626;

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Estilos personalizados para MeguisPet */
@utility meguispet-gradient {
  @apply bg-linear-to-r from-blue-600 to-purple-600;
}
@utility meguispet-card {
  @apply bg-white border border-gray-200 rounded-lg shadow-xs hover:shadow-md transition-shadow;
}
@utility meguispet-sidebar {
  @apply bg-white border-r border-gray-200 h-full;
}

@utility modal-overlay {
  background-color: hsl(var(--foreground) / 0.28);
  background-image: linear-gradient(
    145deg,
    hsl(var(--background) / 0.75),
    hsl(var(--foreground) / 0.2)
  );
  @supports (background: color-mix(in srgb, white, transparent)) {
    background: color-mix(
      in srgb,
      hsl(var(--background) / 0.85) 65%,
      hsl(var(--foreground) / 0.35) 35%
    );
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 224 71% 4%;
    --card-foreground: 210 40% 98%;

    --popover: 224 71% 4%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

/* Dark mode improvements para MeguisPet - cores mais suaves */
.dark {
  --color-meguispet-primary: #60a5fa; /* Azul mais suave */
  --color-meguispet-secondary: #9ca3af; /* Cinza mais suave */
  --color-meguispet-accent: #fbbf24; /* Amarelo vibrante */
  --color-meguispet-success: #34d399; /* Verde mais suave */
  --color-meguispet-warning: #fbbf24; /* Amarelo mais suave */
  --color-meguispet-error: #f87171; /* Vermelho mais suave */
}

/* Transições suaves para mudança de tema */
* {
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

/* Melhorar contraste em dark mode */
.dark .bg-white {
  background-color: hsl(var(--card));
}

.dark .text-gray-900 {
  color: hsl(var(--foreground));
}

.dark .text-gray-700 {
  color: hsl(var(--muted-foreground));
}

.dark .border-gray-200 {
  border-color: hsl(var(--border));
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  
  /* Dark mode para fundo da página */
  .dark body {
    @apply bg-gray-900 text-white;
  }
  
  /* Dark mode para main layout */
  .dark .flex.h-screen {
    @apply bg-gray-900;
  }
  
  /* Dark mode para main content area */
  .dark .flex-1.flex.flex-col {
    @apply bg-gray-900;
  }
}

/* Responsive Design Melhorado - Tailwind v4 */
@theme {
  /* Breakpoints customizados para MeguisPet */
  --breakpoint-xs: 475px;
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;
  
  /* Spacing responsivo */
  --spacing-responsive: clamp(1rem, 2.5vw, 2rem);
  --spacing-responsive-sm: clamp(0.5rem, 1.5vw, 1rem);
  --spacing-responsive-lg: clamp(1.5rem, 4vw, 3rem);
}

/* Container queries para componentes */
@container (min-width: 400px) {
  .product-grid-responsive {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
}

@container (min-width: 600px) {
  .product-grid-responsive {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
}

/* Typography responsiva melhorada */
.text-responsive {
  font-size: clamp(0.875rem, 2.5vw, 1rem);
  line-height: clamp(1.25, 1.5, 1.75);
}

.heading-responsive {
  font-size: clamp(1.25rem, 4vw, 2rem);
  line-height: clamp(1.2, 1.3, 1.4);
}

/* Animações personalizadas otimizadas */
@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateY(10px);
  }
  to { 
    opacity: 1; 
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from { 
    transform: translateX(-100%); 
    opacity: 0;
  }
  to { 
    transform: translateX(0); 
    opacity: 1;
  }
}

@keyframes slideInUp {
  from { 
    transform: translateY(100%); 
    opacity: 0;
  }
  to { 
    transform: translateY(0); 
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out;
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

.animate-slide-in-up {
  animation: slideInUp 0.4s ease-out;
}

/* Performance optimizations */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* Reduce motion para acessibilidade */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Scrollbar customizada para modais e containers */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: rgb(203 213 225) transparent;
}

.dark .scrollbar-thin {
  scrollbar-color: rgb(51 65 85) transparent;
}

/* Webkit scrollbar para Chrome, Safari, Edge */
.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: rgb(203 213 225);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: rgb(51 65 85);
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: rgb(148 163 184);
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: rgb(71 85 105);
}

/* Neutralizar Card dentro de modais para evitar dupla camada visual */
.modal-form-container > div:first-child {
  max-width: none !important;
  max-height: none !important;
  overflow: visible !important;
  margin: 0 !important;
  border: none !important;
  box-shadow: none !important;
  background: transparent !important;
  border-radius: 0 !important;
  padding: 0 !important;
  /* Remove animações do Card dentro do modal */
  transform: none !important;
}

/* Ajustar espaçamento do header dentro de modal */
.modal-form-container > div:first-child > div:first-child {
  padding: 0 0 1.5rem 0 !important;
}

/* Ajustar padding do conteúdo dentro de modal */
.modal-form-container > div:first-child > div:nth-child(2) {
  padding: 0 !important;
}

/* Esconder botão Cancelar duplicado no header dos formulários dentro do modal */
.modal-form-container button[type="button"]:has(+ div),
.modal-form-container > div:first-child > div:first-child button {
  display: none !important;
}

/* Correções para modais diretos (não usando modal-host) - Responsividade ao zoom */
.modal-overlay {
  overflow-y: auto !important;
  padding: 1rem !important;
}

/* Container dentro de modal-overlay */
.modal-overlay > div,
.modal-overlay > form {
  max-height: calc(100vh - 2rem) !important;
  margin: auto !important;
  overflow-y: auto !important;
}

/* Scrollbar para modais diretos */
.modal-overlay > div,
.modal-overlay > form {
  scrollbar-width: thin;
  scrollbar-color: rgb(203 213 225) transparent;
}

.dark .modal-overlay > div,
.dark .modal-overlay > form {
  scrollbar-color: rgb(51 65 85) transparent;
}

.modal-overlay > div::-webkit-scrollbar,
.modal-overlay > form::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.modal-overlay > div::-webkit-scrollbar-track,
.modal-overlay > form::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

.modal-overlay > div::-webkit-scrollbar-thumb,
.modal-overlay > form::-webkit-scrollbar-thumb {
  background-color: rgb(203 213 225);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.dark .modal-overlay > div::-webkit-scrollbar-thumb,
.dark .modal-overlay > form::-webkit-scrollbar-thumb {
  background-color: rgb(51 65 85);
}

.modal-overlay > div::-webkit-scrollbar-thumb:hover,
.modal-overlay > form::-webkit-scrollbar-thumb:hover {
  background-color: rgb(148 163 184);
}

.dark .modal-overlay > div::-webkit-scrollbar-thumb:hover,
.dark .modal-overlay > form::-webkit-scrollbar-thumb:hover {
  background-color: rgb(71 85 105);
}

/* Neutralizar Cards dentro de modais diretos */
.modal-overlay > div[class*="max-h-"],
.modal-overlay > div > div[class*="max-h-"] {
  max-height: calc(100vh - 2rem) !important;
}

/* Remove estilos visuais duplicados de Cards dentro de modais diretos */
.modal-overlay > div > div:first-child[class*="Card"],
.modal-overlay > div:first-child[class*="bg-white"][class*="rounded-lg"][class*="shadow"] {
  border: none !important;
  box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25) !important;
}
